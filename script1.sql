/*
USE master;

IF DB_ID (N'CasinoSlot') IS NOT NULL
DROP DATABASE CasinoSLot;

CREATE DATABASE CasinoSlot

SELECT name,size*1.0/128 AS [Size in MBs]
FROM sys.master_files
WHERE name = N'CasinoSlot'; 
*/

/*
use CasinoSlot

CREATE TABLE EMPLOYEE (
    EMP_ID INTEGER PRIMARY KEY,
    EMP_FNAME VARCHAR(35) NOT NULL,
    EMP_LNAME VARCHAR(35) NOT NULL,
    EMP_ADDRESS VARCHAR(40) NOT NULL,
	EMP_EMAIL VARCHAR(40),
    EMP_DOB DATE NOT NULL,
    EMP_HIRE_DATE DATE NOT NULL,
    EMP_TERM_DATE DATE,
    EMP_DEPT_START_DATE DATE NOT NULL,
    EMP_LOCKER INTEGER,
    EMP_PAY_RATE DECIMAL(7,2) NOT NULL,
    EMP_VAC_ENTITLEMENT SMALLINT NOT NULL,
    EMP_SICK_ENTITLEMENT SMALLINT NOT NULL,
    DEPT_ID INT,
    ROLE_ID INT
);

CREATE TABLE DEPARTMENT (
    DEPT_ID INT PRIMARY KEY,
    DEPT_NAME VARCHAR(20) NOT NULL,
    DEPT_HEAD INT
);

CREATE TABLE DEPT_HISTORY (
    EMP_ID INT,
    DEPT_ID INT,
    ROLE_ID INT,
    HIST_START_DATE DATE NOT NULL,
    HIST_END_DATE DATE NOT NULL,
    PRIMARY KEY (EMP_ID, DEPT_ID, ROLE_ID)
);

CREATE TABLE EMPLOYEE_ROLE (
    ROLE_ID INT PRIMARY KEY,
    ROLE_TITLE VARCHAR(20) NOT NULL,
    ROLE_DESC VARCHAR(25) NOT NULL,
    DEPT_ID INT
);

CREATE TABLE ROLE_CERTIFICATION (
    ROLE_ID INT,
    CERTIFICATION_ID INT,
    PRIMARY KEY (ROLE_ID, CERTIFICATION_ID)
);

CREATE TABLE CERTIFICATION (
    CERTIFICATION_ID INT PRIMARY KEY,
    CERT_NAME VARCHAR(25) NOT NULL,
    CERT_VALID_FOR DATE NOT NULL,
    CERT_ISSUED_BY VARCHAR(25) NOT NULL
);

CREATE TABLE TRAINING_SESSION (
    SESSION_ID INT PRIMARY KEY,
    SESSION_DATE DATE NOT NULL,
    CERTIFICATION_ID INT NOT NULL,
    SKILL_ID INT
);

CREATE TABLE TRAINER_ATTENDANCE (
    EMP_ID INT,
    SESSION_ID INT,
    ATTEN_STATUS VARCHAR(25) NOT NULL,
    PRIMARY KEY (EMP_ID, SESSION_ID)
);

CREATE TABLE TRAINEE_ATTENDANCE (
    EMP_ID INT,
    SESSION_ID INT,
    ATTEN_STATUS VARCHAR(25) NOT NULL,
    PRIMARY KEY (EMP_ID, SESSION_ID)
);

CREATE TABLE SKILL (
    SKILL_ID INT PRIMARY KEY,
    SKILL_NAME VARCHAR(25) NOT NULL
);

CREATE TABLE SECTION_SKILL (
    SKILL_ID INT,
    SEC_ID INT,
    PRIMARY KEY (SKILL_ID, SEC_ID)
);

CREATE TABLE FLOOR_SECTION (
    SEC_ID INT PRIMARY KEY,
    SEC_NAME VARCHAR(25) NOT NULL
);

CREATE TABLE S_SHIFT (
    SHIFT_ID INT PRIMARY KEY,
    SHIFT_START SMALLDATETIME NOT NULL,
    SHIFT_END SMALLDATETIME NOT NULL,
    EMP_ID INT,
    SEC_ID INT,
    SCH_ID INT
);

CREATE TABLE SHIFT_INVENTORY (
    SHIFT_ID INT,
    INV_ID INT,
    QUANTITY INT NOT NULL,
    ASSIGN_DATE DATE NOT NULL,
    ASSIGN_STATUS VARCHAR(25) NOT NULL,
    EXP_DATE DATE,
    PRIMARY KEY (SHIFT_ID, INV_ID)
);

CREATE TABLE INVENTORY (
    INV_ID INT PRIMARY KEY,
    INV_TITLE VARCHAR(25) NOT NULL,
    INV_PRICE DECIMAL(9,2) NOT NULL,
    INV_QTY INT NOT NULL
);

CREATE TABLE LEAVE (
    LEAVE_ID INT PRIMARY KEY,
    LEAVE_TYPE VARCHAR(25) NOT NULL,
    LEAVE_START DATE NOT NULL,
    LEAVE_END DATE NOT NULL,
    LEAVE_COMMENT VARCHAR(255),
    EMP_ID INT
);

CREATE TABLE WRITTEN_WARNING (
    WW_ID INT PRIMARY KEY,
    WW_DATE DATE NOT NULL,
    WW_OFFENCE VARCHAR(25) NOT NULL,
    WW_LEVEL SMALLINT NOT NULL,
    WW_COMMENTS VARCHAR(255),
    EMP_ID INT NOT NULL
);

CREATE TABLE SCHEDULE(
SCH_ID INT PRIMARY KEY,
SCH_DATE DATE NOT NULL,
EMP_ID INT);

*/
/*
use CasinoSlot
-- Add foreign key constraints
ALTER TABLE Employee
ADD FOREIGN KEY (DEPT_ID) REFERENCES Department(DEPT_ID);
ALTER TABLE Employee
ADD FOREIGN KEY (ROLE_ID) REFERENCES EMPLOYEE_ROLE(ROLE_ID);

ALTER TABLE Department
ADD FOREIGN KEY (DEPT_HEAD) REFERENCES EMPLOYEE(EMP_ID);

ALTER TABLE DEPT_HISTORY
ADD FOREIGN KEY (EMP_ID) REFERENCES EMPLOYEE(EMP_ID);
ALTER TABLE DEPT_HISTORY
ADD FOREIGN KEY (DEPT_ID) REFERENCES Department(DEPT_ID);
ALTER TABLE DEPT_HISTORY
ADD FOREIGN KEY (ROLE_ID) REFERENCES EMPLOYEE_ROLE(ROLE_ID);

ALTER TABLE EMPLOYEE_ROLE
ADD FOREIGN KEY (DEPT_ID) REFERENCES Department(DEPT_ID);

ALTER TABLE ROLE_CERTIFICATION
ADD FOREIGN KEY (ROLE_ID) REFERENCES EMPLOYEE_ROLE(ROLE_ID);
ALTER TABLE ROLE_CERTIFICATION
ADD FOREIGN KEY (CERTIFICATION_ID) REFERENCES CERTIFICATION(CERTIFICATION_ID);

ALTER TABLE TRAINING_SESSION
ADD FOREIGN KEY (CERTIFICATION_ID) REFERENCES CERTIFICATION(CERTIFICATION_ID);
ALTER TABLE TRAINING_SESSION
ADD FOREIGN KEY (SKILL_ID) REFERENCES SKILL(SKILL_ID);

ALTER TABLE TRAINER_ATTENDANCE
ADD FOREIGN KEY (EMP_ID) REFERENCES EMPLOYEE(EMP_ID);
ALTER TABLE TRAINER_ATTENDANCE
ADD FOREIGN KEY (SESSION_ID) REFERENCES TRAINING_SESSION(SESSION_ID);

ALTER TABLE TRAINEE_ATTENDANCE
ADD FOREIGN KEY (EMP_ID) REFERENCES Employee(EMP_ID);
ALTER TABLE TRAINEE_ATTENDANCE
ADD FOREIGN KEY (SESSION_ID) REFERENCES TRAINING_SESSION(SESSION_ID);

ALTER TABLE SECTION_SKILL
ADD FOREIGN KEY (SKILL_ID) REFERENCES SKILL(SKILL_ID);
ALTER TABLE SECTION_SKILL
ADD FOREIGN KEY (SEC_ID) REFERENCES FLOOR_SECTION(SEC_ID);

ALTER TABLE S_SHIFT
ADD FOREIGN KEY (EMP_ID) REFERENCES EMPLOYEE(EMP_ID);
ALTER TABLE S_SHIFT
ADD FOREIGN KEY (SEC_ID) REFERENCES FLOOR_SECTION(SEC_ID);
ALTER TABLE S_SHIFT
ADD FOREIGN KEY (SCH_ID) REFERENCES SCHEDULE(SCH_ID); -- Assuming there's a table named S_SCHEDULE with a primary key SCH_ID

ALTER TABLE SHIFT_INVENTORY
ADD FOREIGN KEY (SHIFT_ID) REFERENCES S_SHIFT(SHIFT_ID);
ALTER TABLE SHIFT_INVENTORY
ADD FOREIGN KEY (INV_ID) REFERENCES INVENTORY(INV_ID);

ALTER TABLE LEAVE
ADD FOREIGN KEY (EMP_ID) REFERENCES EMPLOYEE(EMP_ID);

ALTER TABLE WRITTEN_WARNING
ADD FOREIGN KEY (EMP_ID) REFERENCES EMPLOYEE(EMP_ID);

ALTER TABLE SCHEDULE
ADD FOREIGN KEY (EMP_ID) REFERENCES EMPLOYEE(EMP_ID);
*/

use CasinoSlot
/*
TWO DEPARTMENTS DATA ADDED NEED TO CHANGE NULL THO
INSERT INTO Department(DEPT_ID,DEPT_NAME,DEPT_HEAD)
VALUES(1,'SLOT', NULL);

INSERT INTO Department(DEPT_ID,DEPT_NAME,DEPT_HEAD)
VALUES(2,'HR', NULL);
*/
/*
EMPLOYEE ROLE TYPES

INSERT INTO EMPLOYEE_ROLE(ROLE_ID, ROLE_TITLE, ROLE_DESC, DEPT_ID)
VALUES(3,'Director','Operations',1);

INSERT INTO EMPLOYEE_ROLE(ROLE_ID, ROLE_TITLE, ROLE_DESC, DEPT_ID)
VALUES(1,'Shift Manager','Manages shifts',1);

INSERT INTO EMPLOYEE_ROLE(ROLE_ID, ROLE_TITLE, ROLE_DESC, DEPT_ID)
VALUES(2,'FLoor Supervisor','Manages floor',1);

INSERT INTO EMPLOYEE_ROLE(ROLE_ID, ROLE_TITLE, ROLE_DESC, DEPT_ID)
VALUES(4,'Slot attendace','Guest management',1);

INSERT INTO EMPLOYEE_ROLE(ROLE_ID, ROLE_TITLE, ROLE_DESC, DEPT_ID)
VALUES(5,'Human Resources','Record keeping',2);
*/

/*
10 EMPLOYEE RECORDS

INSERT INTO EMPLOYEE(EMP_ID, EMP_FNAME, EMP_LNAME, EMP_ADDRESS, EMP_EMAIL,
EMP_DOB, EMP_HIRE_DATE, EMP_TERM_DATE, EMP_DEPT_START_DATE, EMP_LOCKER, EMP_PAY_RATE, EMP_VAC_ENTITLEMENT, EMP_SICK_ENTITLEMENT, DEPT_ID, ROLE_ID)
VALUES (1, 'Noor', 'Sangha', 'test', 'sanghan@gmail.com', '2002-04-18', '2002-04-18', '2002-04-18', '2002-04-18', 3, 0.2, 4, 2, 1, 3);

INSERT INTO EMPLOYEE(EMP_ID, EMP_FNAME, EMP_LNAME, EMP_ADDRESS, EMP_EMAIL,
EMP_DOB, EMP_HIRE_DATE, EMP_TERM_DATE, EMP_DEPT_START_DATE, EMP_LOCKER, EMP_PAY_RATE, EMP_VAC_ENTITLEMENT, EMP_SICK_ENTITLEMENT, DEPT_ID, ROLE_ID)
VALUES (2, 'Bob', 'Gill', '1327 apple st', 'bob@gmail.com', '1990-04-18', '2009-04-18', NULL, '2009-04-18', 2, 21.2, 8, 5, 1, 3);

*/
INSERT INTO EMPLOYEE(EMP_ID, EMP_FNAME, EMP_LNAME, EMP_ADDRESS, EMP_EMAIL,
EMP_DOB, EMP_HIRE_DATE, EMP_TERM_DATE, EMP_DEPT_START_DATE, EMP_LOCKER, EMP_PAY_RATE, EMP_VAC_ENTITLEMENT, EMP_SICK_ENTITLEMENT, DEPT_ID, ROLE_ID)
VALUES (3, 'June', 'Armstrong', '13893 pear st', 'june@gmail.com', '1980-01-26', '2021-09-18', NULL, '2021-09-18', 3, 37.2, 12, 7, 2, 5);


INSERT INTO EMPLOYEE(EMP_ID, EMP_FNAME, EMP_LNAME, EMP_ADDRESS, EMP_EMAIL,
EMP_DOB, EMP_HIRE_DATE, EMP_TERM_DATE, EMP_DEPT_START_DATE, EMP_LOCKER, EMP_PAY_RATE, EMP_VAC_ENTITLEMENT, EMP_SICK_ENTITLEMENT, DEPT_ID, ROLE_ID)
VALUES (4, 'Julie', 'Appleseed', '4678 peach st', 'Julie@gmail.com', '2001-04-18', '2022-11-20', NULL, '2022-11-20', 4, 11.2, 2, 0, 1, 4);

INSERT INTO EMPLOYEE(EMP_ID, EMP_FNAME, EMP_LNAME, EMP_ADDRESS, EMP_EMAIL,
EMP_DOB, EMP_HIRE_DATE, EMP_TERM_DATE, EMP_DEPT_START_DATE, EMP_LOCKER, EMP_PAY_RATE, EMP_VAC_ENTITLEMENT, EMP_SICK_ENTITLEMENT, DEPT_ID, ROLE_ID)
VALUES (5, 'Jaina', 'Jose', '4654 pineapple st', 'jaina@gmail.com', '2004-10-13', '2021-04-18', NULL, '2021-04-18', 5, 50, 14, 8, 1, 3);

INSERT INTO EMPLOYEE(EMP_ID, EMP_FNAME, EMP_LNAME, EMP_ADDRESS, EMP_EMAIL,
EMP_DOB, EMP_HIRE_DATE, EMP_TERM_DATE, EMP_DEPT_START_DATE, EMP_LOCKER, EMP_PAY_RATE, EMP_VAC_ENTITLEMENT, EMP_SICK_ENTITLEMENT, DEPT_ID, ROLE_ID)
VALUES (6, 'Brendan', 'Doyle', '86567 strawberry st', 'brendan@gmail.com', '1990-12-18', '2013-05-18', NULL, '2013-05-18', 6, 21.2, 8, 5, 1, 3);

INSERT INTO EMPLOYEE(EMP_ID, EMP_FNAME, EMP_LNAME, EMP_ADDRESS, EMP_EMAIL,
EMP_DOB, EMP_HIRE_DATE, EMP_TERM_DATE, EMP_DEPT_START_DATE, EMP_LOCKER, EMP_PAY_RATE, EMP_VAC_ENTITLEMENT, EMP_SICK_ENTITLEMENT, DEPT_ID, ROLE_ID)
VALUES (7, 'Bob', 'Gill', '1327 apple st', 'bob@gmail.com', '1990-04-18', '2009-04-18', NULL, '2009-04-18', 7, 21.2, 8, 5, 1, 3);

INSERT INTO EMPLOYEE(EMP_ID, EMP_FNAME, EMP_LNAME, EMP_ADDRESS, EMP_EMAIL,
EMP_DOB, EMP_HIRE_DATE, EMP_TERM_DATE, EMP_DEPT_START_DATE, EMP_LOCKER, EMP_PAY_RATE, EMP_VAC_ENTITLEMENT, EMP_SICK_ENTITLEMENT, DEPT_ID, ROLE_ID)
VALUES (8, 'Bob', 'Gill', '1327 apple st', 'bob@gmail.com', '1990-04-18', '2009-04-18', NULL, '2009-04-18', 8, 21.2, 8, 5, 1, 3);

INSERT INTO EMPLOYEE(EMP_ID, EMP_FNAME, EMP_LNAME, EMP_ADDRESS, EMP_EMAIL,
EMP_DOB, EMP_HIRE_DATE, EMP_TERM_DATE, EMP_DEPT_START_DATE, EMP_LOCKER, EMP_PAY_RATE, EMP_VAC_ENTITLEMENT, EMP_SICK_ENTITLEMENT, DEPT_ID, ROLE_ID)
VALUES (9, 'Bob', 'Gill', '1327 apple st', 'bob@gmail.com', '1990-04-18', '2009-04-18', NULL, '2009-04-18', 9, 21.2, 8, 5, 1, 3);

INSERT INTO EMPLOYEE(EMP_ID, EMP_FNAME, EMP_LNAME, EMP_ADDRESS, EMP_EMAIL,
EMP_DOB, EMP_HIRE_DATE, EMP_TERM_DATE, EMP_DEPT_START_DATE, EMP_LOCKER, EMP_PAY_RATE, EMP_VAC_ENTITLEMENT, EMP_SICK_ENTITLEMENT, DEPT_ID, ROLE_ID)
VALUES (10, 'Bob', 'Gill', '1327 apple st', 'bob@gmail.com', '1990-04-18', '2009-04-18', NULL, '2009-04-18', 10, 21.2, 8, 5, 1, 3);

